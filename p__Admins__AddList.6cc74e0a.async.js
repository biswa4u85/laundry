(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{qqbQ:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=r(a("bx4M")),s=r(a("jehZ"));a("5NDa");var u=r(a("5rEg"));a("+L6B");var n=r(a("2/Rp")),d=r(a("p0pE")),i=r(a("2Taf")),o=r(a("vZ4D")),p=r(a("MhPg")),f=r(a("l4Ni")),c=r(a("ujKo"));a("OaEy");var m=r(a("2fM7"));a("y8nQ");var g=r(a("Vl3Y")),h=P(a("q1tI")),E=a("MuoO"),v=a("Y2fQ"),y=r(a("3a4m")),b=r(a("NpBu")),M=r(a("zHco"));a("91UR");var w,k,D,q=r(a("E0KS")),A=r(a("mW0K"));function R(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(R=function(e){return e?a:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var a=R(t);if(a&&a.has(e))return a.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=l?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(r,s,u):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}function U(e){var t=O();return function(){var a,r=(0,c.default)(e);if(t){var l=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,l)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var F=g.default.Item,z=m.default.Option,L=(w=(0,E.connect)(function(e){var t=e.login,a=e.users,r=e.settings,l=e.loading;return{token:t.currentUser.Authorization,currentUser:t.currentUser,singleData:a.singleData,settings:r.data,isAddEdit:a.isAddEdit,submitting:l.effects["users/addUsers"]}}),k=g.default.create(),w(D=k(D=function(e){(0,p.default)(a,e);var t=U(a);function a(){var e;(0,i.default)(this,a);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return e=t.call.apply(t,[this].concat(l)),e.state={pageId:null},e.handleSubmit=function(t){var a=e.props,r=a.dispatch,l=a.form,s=a.singleData,u=a.token,n=e.state.pageId;t.preventDefault(),l.validateFieldsAndScroll(function(e,t){if(!e)if(n){var a=s;Object.assign(a,t),r({type:"users/fetchEditData",payload:(0,d.default)({},a,{profile:{profileURL:t.profileURL,name:t.name}}),token:u})}else r({type:"users/fetchAddData",payload:(0,d.default)({},t,{profile:{profileURL:t.profileURL,name:t.name}}),token:u})})},e}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.token,r=e.match,l=r.params?r.params.id:null;this.setState({pageId:l});var s=r.path.split("/")[1];this.setState({pagePath:s}),t(l?{type:"users/fetchSingleData",payload:{id:l},token:a}:{type:"users/fetchSingleDataNull",payload:{id:l},token:a})}},{key:"componentDidUpdate",value:function(e){var t=this.props.isAddEdit;t!==e.isAddEdit&&(t||y.default.push("/".concat(this.state.pagePath,"/all")))}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.submitting,d=a.singleData,i=a.token,o=a.settings,p=a.currentUser,f=this.props.form,c=f.getFieldDecorator,E=f.getFieldValue,w=this.state,k=w.pageId,D=w.pagePath,R=o.userStatus?o.userStatus:[],P="super-admin"===p.roles[0]?A.default.superAdminRoleList:A.default.adminRoleList,U={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},O={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return h.default.createElement(M.default,{title:k?"Edit Details":"Add Details",content:h.default.createElement(n.default,{icon:"caret-left",type:"primary",onClick:function(){return y.default.push("/".concat(D,"/all"))}},"Back")},h.default.createElement(l.default,{bordered:!1},h.default.createElement(g.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.name"})}),c("name",{initialValue:null===d||void 0===d?void 0:null===(e=d.profile)||void 0===e?void 0:e.name,rules:[{required:!0,message:(0,v.formatMessage)({id:"app.users.required.name"})}]})(h.default.createElement(u.default,{placeholder:(0,v.formatMessage)({id:"app.users.placeholder.name"})}))),h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.roles"})}),c("roles",{initialValue:d.roles,rules:[{required:!0,message:(0,v.formatMessage)({id:"app.users.required.roles"})}]})(h.default.createElement(m.default,{placeholder:(0,v.formatMessage)({id:"app.users.placeholder.roles"}),style:{width:"100%"}},P.map(function(e,t){return h.default.createElement(z,{key:t,value:e.id},e.name)})))),h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.profile"})}),c("profileURL",{initialValue:null===d||void 0===d?void 0:d.profileURL})(h.default.createElement(b.default,{newValue:E("profileURL"),token:i}))),h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.email"})}),c("email",{initialValue:d.email,rules:[{required:!0,message:(0,v.formatMessage)({id:"app.users.required.email"})},{pattern:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,message:(0,v.formatMessage)({id:"app.users.required.invalid"})}]})(h.default.createElement(u.default,{placeholder:(0,v.formatMessage)({id:"app.users.placeholder.email"})}))),h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.mobile"})}),c("phone",{initialValue:d.phone,rules:[{required:!0,message:(0,v.formatMessage)({id:"app.users.required.mobile"},{})},{pattern:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,message:(0,v.formatMessage)({id:"app.users.label.mobile.wrong-format"})}]})(h.default.createElement(q.default,{disabled:!!k}))),h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.currentAddress"})}),c("currentAddress",{initialValue:d.currentAddress,rules:[{required:!0,message:(0,v.formatMessage)({id:"app.users.required.currentAddress"})}]})(h.default.createElement(u.default,{placeholder:(0,v.formatMessage)({id:"app.users.placeholder.currentAddress"})}))),h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.password"})}),c("password",{initialValue:d.password,rules:[k?{}:{required:!0,message:(0,v.formatMessage)({id:"app.users.required.password"})}]})(h.default.createElement(u.default.Password,{autoComplete:"new-password",placeholder:(0,v.formatMessage)({id:"app.users.placeholder.password"})}))),h.default.createElement(F,(0,s.default)({},U,{label:h.default.createElement(v.FormattedMessage,{id:"app.users.label.status"})}),c("status",{initialValue:d.status,rules:[{required:!0,message:(0,v.formatMessage)({id:"app.users.required.status"})}]})(h.default.createElement(m.default,{placeholder:(0,v.formatMessage)({id:"app.users.placeholder.status"}),style:{width:"100%"}},R.map(function(e,t){return h.default.createElement(z,{key:t,value:e},e)})))),h.default.createElement(F,(0,s.default)({},O,{style:{marginTop:32}}),h.default.createElement(n.default,{type:"primary",htmlType:"submit",loading:r},k?"UPDATE":"ADD"),h.default.createElement(n.default,{onClick:function(){return y.default.push("/".concat(t.state.pagePath,"/all"))},style:{marginLeft:8}},h.default.createElement(v.FormattedMessage,{id:"form.cancel"}))))))}}]),a}(h.PureComponent))||D)||D),S=L;t.default=S}}]);