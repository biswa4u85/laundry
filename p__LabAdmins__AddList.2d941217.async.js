(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{g21w:function(e,a,t){"use strict";var r=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var l=r(t("bx4M")),s=r(t("jehZ"));t("5NDa");var d=r(t("5rEg"));t("+L6B");var u=r(t("2/Rp")),n=r(t("p0pE")),i=r(t("2Taf")),o=r(t("vZ4D")),p=r(t("MhPg")),f=r(t("l4Ni")),c=r(t("ujKo"));t("OaEy");var m=r(t("2fM7"));t("y8nQ");var g=r(t("Vl3Y")),h=O(t("q1tI")),b=t("MuoO"),E=t("Y2fQ"),y=r(t("3a4m")),v=r(t("NpBu")),M=r(t("zHco"));t("91UR");var w,D,k,q=r(t("E0KS")),A=r(t("mW0K"));function R(e){if("function"!==typeof WeakMap)return null;var a=new WeakMap,t=new WeakMap;return(R=function(e){return e?t:a})(e)}function O(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=R(a);if(t&&t.has(e))return t.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var d=l?Object.getOwnPropertyDescriptor(e,s):null;d&&(d.get||d.set)?Object.defineProperty(r,s,d):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}function P(e){var a=U();return function(){var t,r=(0,c.default)(e);if(a){var l=(0,c.default)(this).constructor;t=Reflect.construct(r,arguments,l)}else t=r.apply(this,arguments);return(0,f.default)(this,t)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var L=g.default.Item,F=m.default.Option,I=(w=(0,b.connect)(function(e){var a=e.login,t=e.users,r=e.settings,l=e.labs,s=e.loading;return{token:a.currentUser.Authorization,currentUser:a.currentUser,singleData:t.singleData,settings:r.data,labData:l.data.list,isAddEdit:t.isAddEdit,submitting:s.effects["users/addUsers"]}}),D=g.default.create(),w(k=D(k=function(e){(0,p.default)(t,e);var a=P(t);function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return e=a.call.apply(a,[this].concat(l)),e.state={pageId:null},e.handleSubmit=function(a){var t=e.props,r=t.dispatch,l=t.form,s=t.singleData,d=t.token,u=e.state.pageId;a.preventDefault(),l.validateFieldsAndScroll(function(e,a){if(!e)if(u){var t=s;Object.assign(t,a),r({type:"users/fetchEditData",payload:(0,n.default)({},t,{profile:{profileURL:a.profileURL,name:a.name}}),token:d})}else r({type:"users/fetchAddData",payload:(0,n.default)({},a,{profile:{profileURL:a.profileURL,name:a.name}}),token:d})})},e}return(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.dispatch,t=e.token,r=e.match,l=r.params?r.params.id:null;this.setState({pageId:l});var s=r.path.split("/")[1];this.setState({pagePath:s});var d={};a({type:"labs/fetchData",payload:d,token:t}),a(l?{type:"users/fetchSingleData",payload:{id:l},token:t}:{type:"users/fetchSingleDataNull",payload:{id:l},token:t})}},{key:"componentDidUpdate",value:function(e){var a=this.props.isAddEdit;a!==e.isAddEdit&&(a||y.default.push("/".concat(this.state.pagePath,"/all")))}},{key:"render",value:function(){var e,a=this,t=this.props,r=t.submitting,n=t.singleData,i=t.token,o=t.labData,p=t.settings,f=t.currentUser,c=this.props.form,b=c.getFieldDecorator,w=c.getFieldValue,D=this.state,k=D.pageId,R=D.pagePath,O=(p.userStatus&&p.userStatus,p.departments?p.departments:[]),P="super-lab-admin"===f.roles[0]?A.default.labAdminRoleList:A.default.superLabAdminRoleList,U={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},I={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return h.default.createElement(M.default,{title:k?"Edit Details":"Add Details",content:h.default.createElement(u.default,{icon:"caret-left",type:"primary",onClick:function(){return y.default.push("/".concat(R,"/all"))}},"Back")},h.default.createElement(l.default,{bordered:!1},h.default.createElement(g.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.name"})}),b("name",{initialValue:null===n||void 0===n?void 0:null===(e=n.profile)||void 0===e?void 0:e.name,rules:[{required:!0,message:(0,E.formatMessage)({id:"app.users.required.name"})}]})(h.default.createElement(d.default,{placeholder:(0,E.formatMessage)({id:"app.users.placeholder.name"})}))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.roles"})}),b("roles",{initialValue:n.roles,rules:[{required:!0,message:(0,E.formatMessage)({id:"app.users.required.roles"})}]})(h.default.createElement(m.default,{placeholder:(0,E.formatMessage)({id:"app.users.placeholder.roles"}),style:{width:"100%"}},P.map(function(e,a){return h.default.createElement(F,{key:a,value:e.id},e.name)})))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.tests.label.labId"})}),b("labID",{initialValue:n.labID,rules:[{required:!0,message:(0,E.formatMessage)({id:"app.tests.required.labId"})}]})(h.default.createElement(m.default,{mode:"super-lab-admin"===w("roles")||w("roles")&&"super-lab-admin"===w("roles")[0]?"multiple":"",placeholder:(0,E.formatMessage)({id:"app.tests.placeholder.labId"}),style:{width:"100%"},showSearch:!0,filterOption:function(e,a){return a.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},o.map(function(e,a){return h.default.createElement(F,{key:a,value:e._id},e.labName)})))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.profile"})}),b("profileURL",{initialValue:null===n||void 0===n?void 0:n.profileURL})(h.default.createElement(v.default,{newValue:w("profileURL"),token:i}))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.email"})}),b("email",{initialValue:n.email,rules:[{required:!0,message:(0,E.formatMessage)({id:"app.users.required.email"})},{pattern:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,message:(0,E.formatMessage)({id:"app.users.required.invalid"})}]})(h.default.createElement(d.default,{placeholder:(0,E.formatMessage)({id:"app.users.placeholder.email"})}))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.mobile"})}),b("phone",{initialValue:n.phone,rules:[{required:!0,message:(0,E.formatMessage)({id:"app.users.required.mobile"},{})},{pattern:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,message:(0,E.formatMessage)({id:"app.users.label.mobile.wrong-format"})}]})(h.default.createElement(q.default,{disabled:!!k}))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.department"})}),b("department",{initialValue:n.department,rules:[{required:!0,message:(0,E.formatMessage)({id:"app.users.required.department"})}]})(h.default.createElement(m.default,{placeholder:(0,E.formatMessage)({id:"app.users.placeholder.department"}),style:{width:"100%"}},O.map(function(e,a){return h.default.createElement(F,{key:a,value:e},e)})))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.currentAddress"})}),b("currentAddress",{initialValue:n.currentAddress,rules:[{required:!0,message:(0,E.formatMessage)({id:"app.users.required.currentAddress"})}]})(h.default.createElement(d.default,{placeholder:(0,E.formatMessage)({id:"app.users.placeholder.currentAddress"})}))),h.default.createElement(L,(0,s.default)({},U,{label:h.default.createElement(E.FormattedMessage,{id:"app.users.label.password"})}),b("password",{initialValue:n.password,rules:[k?{}:{required:!0,message:(0,E.formatMessage)({id:"app.users.required.password"})}]})(h.default.createElement(d.default.Password,{autoComplete:"new-password",placeholder:(0,E.formatMessage)({id:"app.users.placeholder.password"})}))),h.default.createElement(L,(0,s.default)({},I,{style:{marginTop:32}}),h.default.createElement(u.default,{type:"primary",htmlType:"submit",loading:r},k?"UPDATE":"ADD"),h.default.createElement(u.default,{onClick:function(){return y.default.push("/".concat(a.state.pagePath,"/all"))},style:{marginLeft:8}},h.default.createElement(E.FormattedMessage,{id:"form.cancel"}))))))}}]),t}(h.PureComponent))||k)||k),S=I;a.default=S}}]);